decl inp: ubit<32>[32];
decl prime: ubit<32>[1];
decl omegas: ubit<32>[32];
decl ret: ubit<32>[32];  // Output array.

let p: bit<32> = prime[0];

---

for (let i: ubit<4> = 0..32) {
  for (let j: ubit<4> = 0..32) {
    ret[i] := (ret[i] + inp[j] * omegas[(i * j) % 32]) % p;
  }
}
